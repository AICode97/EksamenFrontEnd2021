(this.webpackJsonpfront_package=this.webpackJsonpfront_package||[]).push([[0],{139:function(e,t,c){},140:function(e,t,c){},443:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(2),r=c.n(s),i=c(24),a=c.n(i),o=(c(139),c(4)),j=(c(140),c(9)),l=c(5),u=c(17);var h={server:"https://greatslav.me/Eksamen"}.server;function d(e){return e.ok?e.json():Promise.reject({status:e.status,fullError:e.json()})}var b=function(){var e=function(e){localStorage.setItem("jwtToken",e)},t=function(){return localStorage.getItem("jwtToken")},c=function(){console.log("chcecking if logged in in facade");var e=null!=t();return e},n=function(e,n,s){var r={method:e,headers:{"Content-type":"application/json",Accept:"application/json"}};return n&&c()&&(r.headers["x-access-token"]=t()),s&&(r.body=JSON.stringify(s)),r};return{makeOptions:n,setToken:e,getToken:t,loggedIn:c,login:function(t,c){var s=n("POST",!0,{username:t,password:c});return fetch(h+"/api/login",s).then(d).then((function(c){e(c.token),function(e){localStorage.setItem("user",e)}(t)}))},logout:function(){localStorage.removeItem("jwtToken"),localStorage.removeItem("user")},fetchData:function(e){var t=n("GET",!0);return fetch(h+e,t).then(d)},registerUser:function(e){var t=n("POST",!1,Object(u.a)({},e));return fetch(h+"/api/user",t).then(d)},fetchAnyGET:function(e){var t=n("GET",!1);return fetch(e,t).then(d)},fetchNoOptions:function(e){return fetch(e).then(d)},getActiveUser:function(){return localStorage.getItem("user")},registerDog:function(e){var t=n("POST",!1,Object(u.a)({},e));return fetch(h+"/api/dog/add",t).then(d)}}}(),O=c(30);function x(e){var t=e.login,c=e.init,r=(e.errorMsg,Object(s.useState)(c)),i=Object(o.a)(r,2),a=i[0],j=i[1],h=Object(l.f)(),d=function(e){j(Object(u.a)(Object(u.a)({},a),{},Object(O.a)({},e.target.id,e.target.value)))};return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:" Log in "}),Object(n.jsxs)("form",{onChange:d,children:["Username:",Object(n.jsx)("input",{type:"text",id:"username",onChange:d}),"Password:",Object(n.jsx)("input",{type:"password",id:"password",onChange:d}),Object(n.jsx)("button",{onClick:function(e){e.preventDefault(),t(a.username,a.password,(function(){"admin"!==a.username?h.push("/account"):h.push("/statistics")}))},children:"Login"})]})]})}function f(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),c=t[0],r=t[1];return Object(s.useEffect)((function(){fetch("http://localhost:8080/jpareststarter/api/dog/breeds").then((function(e){return e.json()})).then((function(e){r(e)}))}),[]),c.dogs?Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Breed List"}),Object(n.jsx)("ul",{children:c.dogs.map((function(e){return Object(n.jsx)("li",{children:e.breed})}))})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Breed List"}),Object(n.jsx)("p",{})]})}function g(e){var t=e.loggedIn,c=e.admin,s=e.logout,r=e.activeUser,i=Object(l.f)();return Object(n.jsxs)("ul",{className:"header",children:[Object(n.jsxs)("div",{children:[c?"":Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{exact:!0,activeClassName:"active",to:"/",children:"Home"})}),c||t?"":Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{activeClassName:"active",to:"/register",children:"Register"})}),t&&!c?Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{activeClassName:"active",to:"/account",children:"Account"})}):"",t&&!c?Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{activeClassName:"active",to:"/MyDogs",children:"My Dogs"})}):"",c?Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{activeClassName:"active",to:"/orders",children:"Orders"})}):"",c?Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{activeClassName:"active",to:"/users",children:"Users"})}):"",c?Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{activeClassName:"active",to:"/statistics",children:"Statistics"})}):"",c||t?"":Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{activeClassName:"active",to:"/login",children:"Log in"})}),Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{activeClassName:"active",to:"/search",children:"Search"})})]}),c||t?Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"active",onClick:function(e){e.preventDefault(),s(),i.push("/")},children:"Log out"}),"You are logged in as ",r]}):""]})}function p(e){var t=e.facade,c=e.init,r=Object(s.useState)(c),i=Object(o.a)(r,2),a=i[0],j=i[1],h=Object(s.useState)(""),d=Object(o.a)(h,2),b=d[0],x=d[1],f=Object(s.useState)("Stranger"),g=Object(o.a)(f,2),p=(g[0],g[1]),m=Object(s.useState)(""),v=Object(o.a)(m,2),S=v[0],C=v[1],w=Object(l.f)();function k(e){var t=e.target,c=t.value,n=t.id;x(""),j(Object(u.a)(Object(u.a)({},a),{},Object(O.a)({},n,c)))}return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Create A New Profile"}),Object(n.jsx)("h5",{children:b}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S.length<=3||a.email.length<=3||a.password.length<=3||a.username.length<=3?x("Username or password must be longer than 3 characters"):(S===a.password?t.registerUser(a).then((function(e){x(e.msg),p(e.username)})).catch((function(e){e.status?e.fullError.then((function(e){return x(e.message)})):(x("Network error has occurred: could not log in"),console.log("Network error! Could not log in"))})):x("passwords did not match"),w.push("/login"))},children:["Email:",Object(n.jsx)("input",{type:"text",id:"email",onChange:k}),"Username:",Object(n.jsx)("input",{type:"text",id:"username",onChange:k}),"Password:",Object(n.jsx)("input",{type:"password",id:"password",onChange:k}),"Repeat password:",Object(n.jsx)("input",{type:"password",id:"password1",onChange:function(e){C(e.target.value),x("")}}),Object(n.jsx)("input",{type:"submit",value:"Submit"})]})]})}function m(e){var t=e.facade,c=e.activeUser,r=Object(s.useState)({name:"",dob:"",breed:"",info:"",activeUser:c}),i=Object(o.a)(r,2),a=i[0],j=i[1],l=Object(s.useState)(""),h=Object(o.a)(l,2),d=h[0],b=h[1];function x(e){var t=e.target,c=t.value,n=t.id;b(""),j(Object(u.a)(Object(u.a)({},a),{},Object(O.a)({},n,c)))}return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"i hate react =)"}),Object(n.jsx)("h2",{children:"Create A New Profile"}),Object(n.jsx)("h5",{children:d}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.registerDog(a).then((function(e){b(e.msg)})).catch((function(e){e.satus?e.fullError.then((function(e){return b(e.message)})):(b("Network error has occured: no dog was created"),console.log("Network error! Could not create dog"))}))},children:["Dog Name:",Object(n.jsx)("input",{type:"text",id:"name",onChange:x}),"Dog Breed:",Object(n.jsx)("input",{type:"text",id:"breed",onChange:x}),"Date of Birth:",Object(n.jsx)("input",{type:"text",id:"dob",onChange:x}),"Info:",Object(n.jsx)("input",{type:"text",id:"info",onChange:x}),Object(n.jsx)("input",{type:"submit",value:"Submit"})]})]})}function v(){return Object(n.jsx)("div",{children:Object(n.jsx)("h2",{children:"Orders"})})}function S(){return Object(n.jsx)("div",{children:Object(n.jsx)("h2",{children:"Users"})})}c(85);function C(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),c=t[0],r=t[1],i=Object(s.useState)(""),a=Object(o.a)(i,2),j=a[0],l=a[1],u=function(e){var t=e.target.value;l(t),console.log(j)},h=function(e){d(j),e.preventDefault()},d=function(e){var t="https://greatslav.me/Eksamen/api/dog/"+j;console.log(j),fetch(t).then((function(e){return e.json()})).then((function(e){r(e)})),setTimeout(1e10)};return console.log(c),c?Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:h,children:[Object(n.jsx)("input",{type:"text",className:"search-box",placeholder:"Search for...",onChange:u}),Object(n.jsx)("input",{type:"submit",value:"Submit"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:c.img}),Object(n.jsx)("li",{children:c.breed}),Object(n.jsx)("li",{children:c.wikipedia}),Object(n.jsx)("li",{children:c.info}),Object(n.jsx)("li",{children:c.fact})]})]})}):Object(n.jsxs)("form",{onSubmit:h,children:[Object(n.jsx)("input",{type:"text",className:"search-box",placeholder:"Search for...",onChange:u}),Object(n.jsx)("input",{type:"submit",value:"Submit"})]})}function w(e){e.facade;var t=Object(s.useState)(""),c=Object(o.a)(t,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){fetch("https://greatslav.me/Eksamen/api/searches/all").then((function(e){return e.json()})).then((function(e){i(e)})),setTimeout(1e10)}),[]),console.log(r),r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Breed Searches"}),Object(n.jsx)("ul",{children:r.map((function(e,t){return Object(n.jsxs)("li",{children:[e.breed,": searched ",e.value," time(s)"]})}))})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Breed Searches"}),Object(n.jsx)("p",{})]})}function k(e){var t=e.activeUser,c=Object(s.useState)(""),r=Object(o.a)(c,2),i=r[0],a=r[1];return Object(s.useEffect)((function(){fetch("https://greatslav.me/Eksamen/api/dog/mydog/"+t).then((function(e){return e.json()})).then((function(e){a(e)})),setTimeout(1e8)}),[]),console.log(t),i?Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Breed List"}),i.map((function(e){return Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:["Name: ",e.name]}),Object(n.jsxs)("li",{children:["Date of birth: ",e.dateOfBirth]}),Object(n.jsxs)("li",{children:["Information: ",e.info]}),Object(n.jsxs)("li",{children:["Breed: ",e.breed]})]})}))]}):Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Breed List"}),Object(n.jsx)("p",{})]})}function N(){var e=Object(l.g)();return Object(n.jsx)("div",{children:Object(n.jsxs)("h3",{children:["No match for ",Object(n.jsx)("code",{children:e.pathname})]})})}var y=function(){var e={username:"",password:""},t=Object(s.useState)(b.loggedIn),c=Object(o.a)(t,2),r=c[0],i=c[1],a=Object(s.useState)(""),u=Object(o.a)(a,2),h=u[0],d=u[1],O=Object(s.useState)(b.getActivUser),y=Object(o.a)(O,2),D=y[0],E=y[1],T=Object(s.useState)(!1),U=Object(o.a)(T,2),I=U[0],B=U[1];return console.log("Admin status: "+I+"  loggedIn status: "+r),Object(n.jsx)(j.a,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(g,{loggedIn:r,admin:I,logout:function(){b.logout(),i(!1),B(!1),E(!1)},activeUser:D,Search:C,MyDogs:k}),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",children:Object(n.jsx)(f,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/search",children:Object(n.jsx)(C,{})}),r?"":Object(n.jsx)(l.a,{exact:!0,path:"/register",children:Object(n.jsx)(p,{facade:b,init:e})}),r?"":Object(n.jsx)(l.a,{exact:!0,path:"/login",children:Object(n.jsx)(x,{login:function(e,t,c){b.login(e,t).then((function(){"admin"!==e?i(!0):B(!0),E(e)})).then(c).catch((function(e){e.status?e.fullError.then((function(e){return d(e.message)})):(d("Network error has occurred: could not log in"),console.log("Network error! Could not log in"))})),d("")},init:e,errorMsg:h})}),r?Object(n.jsx)(l.a,{exact:!0,path:"/account",children:Object(n.jsx)(m,{facade:b,activeUser:D})}):"",r?Object(n.jsx)(l.a,{exact:!0,path:"/MyDogs",children:Object(n.jsx)(k,{activeUser:D})}):"",I?Object(n.jsx)(l.a,{exact:!0,path:"/orders",children:Object(n.jsx)(v,{})}):"",I?Object(n.jsx)(l.a,{exact:!0,path:"/users",children:Object(n.jsx)(S,{})}):"",I?Object(n.jsx)(l.a,{exact:!0,path:"/statistics",children:Object(n.jsx)(w,{})}):"",Object(n.jsx)(l.a,{children:Object(n.jsx)(N,{})})]})]})})},D=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,444)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),s(e),r(e),i(e)}))};a.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),D()}},[[443,1,2]]]);
//# sourceMappingURL=main.adba80e6.chunk.js.map